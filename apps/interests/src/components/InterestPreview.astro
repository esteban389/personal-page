---
interface Props {
  interest: {
    id: string;
    name: string;
    description: string;
    type: string;
    image?: string;
    tags?: string[];
    isCurrent?: boolean;
  };
}

const { interest } = Astro.props;
const visibleTags = interest.tags?.slice(0, 3) || [];
const remainingTagsCount = (interest.tags?.length || 0) - visibleTags.length;
---

<article class="interest-preview" data-interest-id={interest.id}>
  <div class="interest-preview__image-wrapper">
    {interest.image ? (
      <div class="interest-preview__image">
        <img src={interest.image} alt={interest.name} loading="lazy" />
      </div>
    ) : (
      <div class="interest-preview__image-placeholder"></div>
    )}
    {interest.isCurrent && (
      <span class="interest-preview__badge" aria-label="Current interest">Current</span>
    )}
  </div>
  
  <div class="interest-preview__content">
    <p class="interest-preview__type">{interest.type}</p>
    <h3 class="interest-preview__name">{interest.name}</h3>
    <p class="interest-preview__description">{interest.description}</p>
    
    {interest.tags && interest.tags.length > 0 && (
      <div class="interest-preview__tags">
        {visibleTags.map((tag) => (
          <span class="interest-preview__tag">{tag}</span>
        ))}
        {remainingTagsCount > 0 && (
          <span class="interest-preview__tag-more">+{remainingTagsCount}</span>
        )}
      </div>
    )}

    <button class="interest-preview__button" aria-label="View details">
      <svg class="interest-preview__button-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
        <circle cx="12" cy="12" r="3"></circle>
      </svg>
      View Details
    </button>
  </div>
</article>

<style>
  .interest-preview {
    background: var(--color-background);
    border-radius: var(--radius-lg);
    overflow: hidden;
    cursor: pointer;
    transition: transform var(--transition-base), box-shadow var(--transition-base);
    display: flex;
    flex-direction: column;
    height: 100%;
    box-shadow: var(--shadow-sm);
  }

  .interest-preview:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
  }

  .interest-preview__image-wrapper {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 9;
    overflow: hidden;
    background: var(--color-border-light);
  }

  .interest-preview__image {
    width: 100%;
    height: 100%;
  }

  .interest-preview__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .interest-preview__image-placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #e0e0e0 0%, #f5f5f5 100%);
  }

  .interest-preview__badge {
    position: absolute;
    top: var(--spacing-sm);
    right: var(--spacing-sm);
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--color-primary);
    color: var(--color-background);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    border-radius: var(--radius-md);
    white-space: nowrap;
    z-index: 1;
  }

  .interest-preview__content {
    padding: var(--spacing-lg);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    flex: 1;
  }

  .interest-preview__type {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    text-transform: capitalize;
    font-weight: var(--font-weight-normal);
    margin: 0;
  }

  .interest-preview__name {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    line-height: var(--line-height-tight);
    color: var(--color-text);
    margin: 0;
  }

  .interest-preview__description {
    font-size: var(--font-size-base);
    color: var(--color-text);
    line-height: var(--line-height-relaxed);
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
    margin: 0;
  }

  .interest-preview__tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-xs);
    margin-top: var(--spacing-xs);
  }

  .interest-preview__tag {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-sm);
    background: var(--color-surface);
    color: var(--color-text);
    font-size: var(--font-size-xs);
    border-radius: var(--radius-full);
    font-weight: var(--font-weight-normal);
  }

  .interest-preview__tag-more {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-sm);
    color: var(--color-text-muted);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-normal);
  }

  .interest-preview__button {
    margin-top: var(--spacing-md);
    padding: var(--spacing-sm) var(--spacing-md);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    background: transparent;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all var(--transition-base);
    font-family: var(--font-family-base);
  }

  .interest-preview__button:hover {
    background: var(--color-surface);
    border-color: var(--color-text-muted);
  }

  .interest-preview__button-icon {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
  }

  @media (min-width: 768px) {
    .interest-preview__content {
      padding: var(--spacing-xl);
    }
  }
</style>
